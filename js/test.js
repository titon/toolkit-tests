!function(win,doc){"use strict";var body=doc.getElementById("body"),switcher=doc.getElementById("switcher"),destroy=doc.getElementById("destroy"),prev=doc.getElementById("prev"),next=doc.getElementById("next"),top=doc.getElementById("top"),rtl=doc.getElementById("rtl"),theme=doc.getElementById("theme"),Test={instances:[],test:[],loadStyles:function(){var e=[];e.push("css/toolkit"+(Toolkit.isRTL?"-rtl":"")+".css"),e.push("css/style.css"),theme.checked&&e.push("css/theme.css"),e.forEach(function(e){var t=document.createElement("link");t.href=e,t.rel="stylesheet",t.type="text/css",doc.head.appendChild(t)})},loadDefaultModule:function(){if(location.search){var e=location.search.substr(1);e.indexOf("&")>=0&&(e=e.split("&")[0]),Test.loadModule(e,location.hash)}else Test.loadModule("base",location.hash)},loadModule:function(key,hash){if(key){Test.destroyModules();var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?(window.scrollTo(0,0),body.innerHTML=xhr.responseText,Test.updateNav(key,hash),Array.prototype.slice.call(body.querySelectorAll("script")).forEach(function(script){eval(script.textContent)})):(body.innerHTML='<div class="notice is-error">Module does not exist.</div>',Test.updateNav("")))},xhr.open("GET","/tests/"+key+".html?"+Date.now(),!0),xhr.send(null)}},destroyModules:function(){Test.instances.forEach(function(e){e&&e.destroy&&e.destroy()}),Test.instances=[]},updateNav:function(e,t){switcher.value=e;var n=switcher.selectedIndex,o=switcher.options,s=o[n-1]||o[o.length-1],i=o[n+1]||o[0];Test.updateButton(prev,s),Test.updateButton(next,i),Test.updateHistory(e,t)},updateButton:function(e,t){e.disabled=!1,e.classList.remove("is-disabled"),e.setAttribute("data-plugin",t.value),e.querySelector(".test-head-button").innerHTML=t.textContent},updateHistory:function(e,t){if(history.pushState){var n="?"+e+"&rtl="+(rtl.checked?1:0)+"&theme="+(theme.checked?1:0);history.pushState({key:e},e,n+(t||""))}},random:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},setupUI:function(){var e=doc.documentElement;e.classList.add(Toolkit.isTouch?"touch":"no-touch"),e.classList.add(Toolkit.isRTL?"rtl":"ltr"),doc.getElementById("logo").setAttribute("data-version",Toolkit.version),location.search.indexOf("rtl=1")>=0&&(rtl.checked=!0),location.search.indexOf("theme=1")>=0&&(theme.checked=!0),new Toolkit.Drop("#settings")},setupEvents:function(){switcher.addEventListener("change",Test.onSwitch),destroy.addEventListener("click",Test.destroyModules),theme.addEventListener("change",Test.onChangeSetting),prev.addEventListener("click",Test.onGoTo),next.addEventListener("click",Test.onGoTo),win.addEventListener("resize",Test.onResize),rtl.addEventListener("change",Test.onChangeSetting),top.addEventListener("click",function(){window.scrollTo(0,0)}),Test.onResize()},onResize:function(){doc.getElementById("viewport-width").innerHTML=win.innerWidth,doc.getElementById("viewport-height").innerHTML=win.innerHeight},onSwitch:function(e){Test.loadModule(e.currentTarget.value)},onGoTo:function(e){Test.loadModule(e.currentTarget.getAttribute("data-plugin"))},onChangeSetting:function(e){Test.updateHistory(switcher.value,location.hash),location.reload()}};Test.setupUI(),Test.setupEvents(),Test.loadStyles(),Test.loadDefaultModule(),win.Test=Test}(window,document);