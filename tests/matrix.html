<div class="notice is-error show-touch">
    Small viewports will not organize the matrix grid. Try switching to landscape view.
</div>

<div>
    <div class="test-demo">
        <h2 class="test-demo-title">Default.</h2>

        <p class="align-center">
            <button type="button" onclick="appendItem('#matrix-1');" class="button">Append Item</button>
            <button type="button" onclick="prependItem('#matrix-1');" class="button">Prepend Item</button>
            <button type="button" onclick="removeItem('#matrix-1');" class="button">Remove Item</button>
        </p>

        <div class="test-demo-body full">
            <ul id="matrix-1" class="matrix">
                <li><img src="img/matrix/1-1.png" class="fluid"></li>
                <li><img src="img/matrix/1-2.png" class="fluid"></li>
                <li><img src="img/matrix/1-3.png" class="fluid"></li>
                <li><img src="img/matrix/1-4.png" class="fluid"></li>
                <li><img src="img/matrix/1-5.png" class="fluid"></li>
                <li><img src="img/matrix/1-6.png" class="fluid"></li>
                <li><img src="img/matrix/1-7.png" class="fluid"></li>
                <li><img src="img/matrix/1-8.png" class="fluid"></li>
                <li><img src="img/matrix/1-9.png" class="fluid"></li>
                <li><img src="img/matrix/1-10.png" class="fluid"></li>
            </ul>
        </div>
    </div>

    <div class="test-demo">
        <h2 class="test-demo-title">Right-to-left loading. 250px column width.</h2>

        <p class="align-center">
            <button type="button" onclick="appendItem('#matrix-2');" class="button">Append Item</button>
            <button type="button" onclick="prependItem('#matrix-2');" class="button">Prepend Item</button>
            <button type="button" onclick="removeItem('#matrix-2');" class="button">Remove Item</button>
        </p>

        <div class="test-demo-body full">
            <ul id="matrix-2" class="matrix">
                <li><img src="img/matrix/2-1.png" class="fluid"></li>
                <li><img src="img/matrix/2-2.png" class="fluid"></li>
                <li><img src="img/matrix/2-3.png" class="fluid"></li>
                <li><img src="img/matrix/2-4.png" class="fluid"></li>
                <li><img src="img/matrix/2-5.png" class="fluid"></li>
                <li><img src="img/matrix/2-6.png" class="fluid"></li>
                <li><img src="img/matrix/2-7.png" class="fluid"></li>
                <li><img src="img/matrix/2-8.png" class="fluid"></li>
                <li><img src="img/matrix/2-9.png" class="fluid"></li>
                <li><img src="img/matrix/2-10.png" class="fluid"></li>
            </ul>
        </div>
    </div>

    <div class="test-demo">
        <h2 class="test-demo-title">Multiple column spanning. 5px gutter.</h2>

        <p class="align-center">
            <button type="button" onclick="appendItem('#matrix-3');" class="button">Append Item</button>
            <button type="button" onclick="prependItem('#matrix-3');" class="button">Prepend Item</button>
            <button type="button" onclick="removeItem('#matrix-3');" class="button">Remove Item</button>
        </p>

        <div class="test-demo-body full">
            <ul id="matrix-3" class="matrix">
                <li><img src="img/matrix/3-1.png" class="fluid"></li>
                <li><img src="img/matrix/3-2.png" class="fluid"></li>
                <li><img src="img/matrix/3-3.png" class="fluid"></li>
                <li><img src="img/matrix/3-4.png" class="fluid"></li>
                <li><img src="img/matrix/3-5.png" class="fluid"></li>
                <li><img src="img/matrix/3-6.png" class="fluid"></li>
                <li><img src="img/matrix/3-7.png" class="fluid"></li>
                <li><img src="img/matrix/3-8.png" class="fluid"></li>
                <li><img src="img/matrix/3-9.png" class="fluid"></li>
                <li><img src="img/matrix/3-10.png" class="fluid"></li>
            </ul>
        </div>
    </div>
</div>

<script>
    function appendItem(id) {
        newItem(id, 'append');
    }

    function prependItem(id) {
        newItem(id, 'prepend');
    }

    function removeItem(id) {
        $(id).toolkit('matrix', 'remove', $(id).find('li')[0]);
    }

    function newItem(id, where) {
        var matrix = $(id).toolkit('matrix');

        if (!matrix) {
            return;
        }

        var w = 200,
            h = Test.random(200, 600),
            i = new Image();

        if (id === '#matrix-3') {
            w = Test.random(200, 600);
        }

        i.src = 'http://placehold.it/' + w + 'x' + h + '/000000/ffffff.png&text=' + (matrix.items.length + 1);
        i.className = 'fluid';
        i.onload = function() {
            matrix[where]($('<li/>').html(i));
        };
    }

    $(function() {
        Test.instances.push( $('#matrix-1').matrix().toolkit('matrix') );

        Test.instances.push( $('#matrix-2').matrix({
            width: 250,
            rtl: true
        }).toolkit('matrix') );

        Test.instances.push( $('#matrix-3').matrix({
            gutter: 5
        }).toolkit('matrix') );
    });
</script>
